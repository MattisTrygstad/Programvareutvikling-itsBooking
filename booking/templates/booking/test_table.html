{% extends 'itsBooking/base.html' %}
{% load helpers %}

{% block body %}

<style>

tr.reservation_row {
    display: none;
}

tr.booking_interval_row:hover {
    background-color: rgba(250, 250, 150, 0.3) !important;
    cursor: pointer;
}

button.table_button {
    height: 30px;
}

</style>

<div class="uk-container uk-container-center uk-margin-top uk-margin-large-bottom">
    <table class="uk-table uk-table-striped uk-table-small uk-table-middle">
        <thead>
            <tr>
                <th>Time</th>
                {% for day in weekdays %}
                    <th class="uk-text-center">{{ day|nob_day }}</th>
                {% endfor %}
            </tr>
        </thead>
        <tbody>
            {% for interval in intervals %}
                <tr onclick="reveal_reservations(this.id)" id="{{ interval.start }}" class="booking_interval_row">
                    <td>{{ interval.start }} - {{ interval.stop }}</td>
                    <td colspan="4" class="uk-text-center">VIS MER</td>
                    <td></td>
                </tr>
                {% for reservation_interval in interval.interval_reservation_intervals %}
                    <tr class="reservation_row {{ interval.start }}">
                        <td>
                            {{ reservation_interval.start }} - {{ reservation_interval.stop }}
                        </td>
                        {% for reservations in reservation_interval.reservations %}
                            <td>
                                {% include 'booking/student_reservation_button.html' %}
                            </td>
                        {% endfor %}
                    </tr>
                {% endfor %}
            {% endfor %}
        </tbody>
    </table>
</div>

<script>

    function reveal_reservations(id) {

    let all_booking_interval_rows = document.getElementsByClassName("booking_interval_row");
    for (let elt of all_booking_interval_rows) {
        elt.style.display = 'table-row';
    }

    document.getElementById(id).style.display = 'none';
    let all_reservation_rows = document.getElementsByClassName("reservation_row");
    for (let elt of all_reservation_rows) {
        elt.style.display = 'none';
    }

    let show_reservation_rows = document.getElementsByClassName("reservation_row " + id);
    for (let elt of show_reservation_rows) {
        elt.style.display = 'table-row';
    }
}

</script>

{% endblock body %}